import streamlit as st

#emoji sources: https://www.webfx.com/tools/emoji-cheat-sheet/
st.set_page_config(page_title="漢堡巴士路線資料", page_icon=":Oncoming Bus:", layout="wide")

st.markdown(
    """
    <style>
    @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap');
    @import url('https://fonts.googleapis.com/css2?family=Source+Han+Sans+TC:wght@400;500&display=swap');

    /* 設定全局字體 */
    body {
        font-family: 'Source Han Sans TC', 'Roboto', sans-serif;
    }

    /* 你也可以自定義特定區域的字體 */
    h1, h2, h3, h4, h5, h6 {
        font-family: 'Roboto', sans-serif;
    }

    p {
        font-family: 'Source Han Sans TC', sans-serif;
    }
    </style>
    """, unsafe_allow_html=True
)


# ---- HEADER SECTIONS ----

with st.container():
    st.title("漢堡巴士路線")
    st.subheader("可在此查閱漢堡巴士各路線的詳細資料。")
    st.write("[漢堡巴士Spreadsheet](https://docs.google.com/spreadsheets/d/1_hF_4ObI7j7OKKa__Bs9-fCLS6jYLvtTxg_nzhzkLjU/edit?gid=956048970#gid=956048970)")

# 創建兩欄 (左 2 右 3)
col1, col2 = st.columns([2, 3])

# ---- ROUTES DETAILS ----

#路線方向
route_directions = {
    "1": ["1_HVU1", "1_HVU2", "1_HVU3", "1_MAF1", "1_MAF2"],
    "20": ["20_HOT", "20_MNS"],
    "20A": ["20A_MNS", "20A_WEK"]
        }

#車站資料
route_stops = {
    "1_MAF1": [f"{i+1}.{stop}" for i, stop in enumerate([
                "跑馬地 (上)，蟠龍道", "箕鏈坊，藍塘道", "桂芳街，成和道", "山村道，成和道", "景光街",
                "養和醫院，黃泥涌道", "跑馬地馬場，黃泥涌道", "立德里，摩利臣山道", "利景酒店，灣仔道",
                "修頓球場，軒尼詩道", "晏頓街，軒尼詩道", "金鐘 - 太古廣場，金鐘道",
                "中銀大廈，金鐘道", "置地廣場，德輔道中", "中環街市，德輔道中", "急庇利街，德輔道中",
                "上環 - 港澳碼頭"])],

    "1_MAF2": [f"{i+1}.{stop}" for i, stop in enumerate([
                "跑馬地 (上)，蟠龍道", "箕鏈坊，藍塘道", "桂芳街，成和道", "山村道，成和道", "景光街",
                "養和醫院，黃泥涌道", "立德里，摩利臣山道", "利景酒店，灣仔道", "普樂里，灣仔道",
                "修頓球場，軒尼詩道", "晏頓街，軒尼詩道", "金鐘 - 太古廣場，金鐘道",
                "中銀大廈，金鐘道", "置地廣場，德輔道中", "中環街市，德輔道中", "急庇利街，德輔道中",
                "上環 - 港澳碼頭"])],

    "1_HVU1": [f"{i+1}.{stop}" for i, stop in enumerate([
                "上環 - 港澳碼頭", "林士街，德輔道中", "恒生銀行總行大廈，德輔道中", "德忌利士街，德輔道中", 
                "皇后像廣場 ，遮打道", "金鐘 - 金鐘廊，金鐘道", "軍器廠街，軒尼詩道", "柯布連道，軒尼詩道", 
                "譚臣道，菲林明道", "克街，灣仔道", "天樂里，灣仔道", "樂活道，黃泥涌道", 
                "雅谷大廈，黃泥涌道", "跑馬地（下），黃泥涌道", "奕蔭街，成和道", "昇平樓，成和道", 
                "箕鏈坊，藍塘道", "跑馬地 (上)，蟠龍道"])],

    "1_HVU2": [f"{i+1}.{stop}" for i, stop in enumerate([
                "上環 - 港澳碼頭", "林士街，德輔道中", "恒生銀行總行大廈，德輔道中", "德忌利士街，德輔道中", 
                "歷山大廈，德輔道中", "遮打花園，德輔道中", "金鐘 - 金鐘廊，金鐘道", "軍器廠街，軒尼詩道", "柯布連道，軒尼詩道", 
                "譚臣道，菲林明道", "克街，灣仔道", "天樂里，灣仔道", "樂活道，黃泥涌道", 
                "雅谷大廈，黃泥涌道", "跑馬地（下），黃泥涌道", "奕蔭街，成和道", "昇平樓，成和道", 
                "箕鏈坊，藍塘道", "跑馬地 (上)，蟠龍道"])],

    "1_HVU3": [f"{i+1}.{stop}" for i, stop in enumerate([
                "上環 - 港澳碼頭", "林士街，德輔道中", "恒生銀行總行大廈，德輔道中", "德忌利士街，德輔道中", 
                "皇后像廣場 ，遮打道", "金鐘 - 金鐘廊，金鐘道", "軍器廠街，軒尼詩道", "柯布連道，軒尼詩道", 
                "譚臣道，菲林明道", "克街，灣仔道", "天樂里，灣仔道", "樂活道，黃泥涌道", 
                "雅谷大廈，黃泥涌道", "跑馬地（下），黃泥涌道", "奕蔭街，成和道", "昇平樓，成和道", 
                "箕鏈坊，藍塘道", "跑馬地 (上)，蟠龍道"])],

    "20_HOT": [f"{i+1}.{stop}" for i, stop in enumerate([
                "啟德 (沐寧街)", "天寰，沐安街", "沐朗街，沐安街", "啟德 (德朗邨)", "沐虹街，承啟道",
                "東九龍總區警察總部，承啟道", "譽港灣，太子道東", "九龍城巴士轉乘站，太子道西",
                "亞皆老街遊樂場，亞皆老街", "九龍城警署，亞皆老街", "雅麗居，亞皆老街", "九龍醫院主座及西翼大樓，亞皆老街", 
                "萬基大廈，窩打老道", "何文田街，窩打老道", "廣華醫院，窩打老道", "油麻地消防局，窩打老道", 
                "油麻地戲院，窩打老道", "富榮花園，海泓道", "柏景灣，海泓道", "帝柏海灣，櫻桃街", 
                "滙豐中心，深旺道", "君匯港，深旺道", "聚魚道，深旺道", "南昌公園，深旺道",
                "南昌站，深旺道", "長沙灣西 (海達)"])],
    
    "20_MNS": [f"{i+1}.{stop}" for i, stop in enumerate([
               "長沙灣西 (海達)", "富昌邨，深旺道", "港灣豪庭，深旺道", "中匯街，深旺道", 
               "滙豐中心，深旺道", "富貴街，大角咀道", "海富苑，海泓道", "富榮花園，海泓道", "油麻地果欄，窩打老道", 
               "基督教青年會，窩打老道", "廣華醫院，窩打老道", "勝利道，窩打老道", "九龍維景酒店，窩打老道", 
               "怡安閣，窩打老道", "九龍醫院主座及西翼大樓，亞皆老街", "醫院管理局大樓，亞皆老街", "香港眼科醫院，亞皆老街",
               "播道醫院，亞皆老街", "亞皆老街遊樂場，亞皆老街", "九龍城巴士轉乘站，太子道東", "譽港灣，太子道東",
               "景泰街，太子道東", "工業貿易大樓，協調道", "東九龍總區警察總部，承啟道", "啟德 (啟晴邨)", 
               "德朗邨，承啟道", "天寰，沐安街", "啟德 (沐寧街)"])],
    
    "20A_MNS": [f"{i+1}.{stop}" for i, stop in enumerate([
                "佐敦 (海泓道 (北))", "柯士甸站 - D出口，匯民道", "官涌市政大廈，廣東道", "柯士甸道西", "M+，博物館道", 
                "香港故宮文化博物館，博物館道", "柯士甸站，佐敦道", "上海街，佐敦道", "南京街，彌敦道", 
                "九龍中央郵政局，彌敦道", "基督教青年會，窩打老道", "廣華醫院，窩打老道", "勝利道，窩打老道", "九龍維景酒店，窩打老道", 
               "怡安閣，窩打老道", "九龍醫院主座及西翼大樓，亞皆老街", "醫院管理局大樓，亞皆老街", "香港眼科醫院，亞皆老街",
               "九龍城巴士轉乘站，太子道東", "工業貿易大樓，協調道", "東九龍總區警察總部，承啟道", "啟德 (啟晴邨)", 
               "德朗邨，承啟道", "天寰，沐安街", "啟德 (沐寧街)"])],

    "20A_WEK": [f"{i+1}.{stop}" for i, stop in enumerate([
                "啟德 (沐寧街)", "天寰，沐安街", "沐朗街，沐安街", "啟德 (德朗邨)", "沐虹街，承啟道",
                "東九龍總區警察總部，承啟道", "譽港灣，太子道東", 
                "九龍城警署，亞皆老街", "雅麗居，亞皆老街", "九龍醫院主座及西翼大樓，亞皆老街", 
                "萬基大廈，窩打老道", "何文田街，窩打老道", "廣華醫院，窩打老道", "油麻地消防局，窩打老道", 
                "永星里，彌敦道", "彌敦酒店，彌敦道", "白加士街，廟街", "炮台街，佐敦道", "柯士甸站，佐敦道", 
                "圓方，雅翔道", "M+，博物館道", "香港故宮文化博物館，博物館道", "環球貿易廣場，柯士甸道西", 
                "Grand Austin，廣東道", "柯士甸站 - D出口，匯民道", "佐敦 (海泓道 (北))"])],
             }
    
#車資
route_fare = {
             "1_MAF1":["跑馬地 (上)，蟠龍道 起 $9"],
             "1_MAF2":["跑馬地 (上)，蟠龍道 起 $9"],
             "1_HVU1":["上環 - 港澳碼頭 起 $9"],
             "1_HVU2":["上環 - 港澳碼頭 起 $9"],
             "1_HVU3":["上環 - 港澳碼頭 起 $9"],

             "20_HOT":["啟德 (沐寧街) 起 $6.4",
                       "富榮花園，海泓道 起 $5.1"],
             "20_MNS":["長沙灣西 (海達) 起 $6.4",
                      "工業貿易大樓，協調道 起 $5.1"],
            
             "20A_MNS":["佐敦 (海泓道 (北)) 起 $7",
                        "富榮花園，海泓道 起 $5.1"],
             "20A_WEK":["啟德 (沐寧街) 起 $7",
                        "永星里，彌敦道 起 $5.8"]
                      }

#服務時間
route_service_time = {
    "1_MAF1": "06:00 - 23:00",
    "1_MAF2": "06:00 - 23:00，只於跑馬日服務",
    "1_HVU1": "06:30 - 23:30，星期一至五，公眾假期除外",
    "1_HVU2": "06:30 - 23:30，星期六、日及公眾假期",
    "1_HVU3": "06:30 - 23:30，只於跑馬日服務",

    "20_HOT": "05:30 - 00:20",
    "20_MNS": "05:30 - 00:20",

    "20A_MNS": "05:50 - 00:20",
    "20A_WEK": "05:50 - 00:20",
}

# ---- ROUTES SEARCH ----

routeEnquiry = ""
routeEnquiryRoute = ""

# ---- 左側 (輸入查詢) ----
with col1:
    
# ---- 查詢階段 1: 輸入路線編號 ----
    st.subheader("🔍 第1步：輸入路線編號")
    routeEnquiry = st.text_input("請輸入路線編號 (例如 1):", "1").strip()

# ---- 查詢階段 2: 選擇走線 ----
    if routeEnquiry in route_directions:
        st.subheader("📌 第2步：選擇走線")
        route_options = route_directions[routeEnquiry]  # 取得該路線的所有走線
        routeEnquiryRoute = st.selectbox("請選擇走線:", route_options)  # 下拉選單

        # 顯示結果
        st.write(f"**您選擇的路線:** {routeEnquiry}")
        st.write(f"**選擇的走線:** {routeEnquiryRoute}")

    else:
        st.warning("請輸入有效的路線編號！")

# ---- 右側 (顯示結果) ----
with col2:
    st.subheader("📌 查詢結果")

    if routeEnquiryRoute:
        st.write(f"**方向:** {routeEnquiryRoute}")

        # 直接使用 `routeEnquiryRoute` 作為 key
        route_key = routeEnquiryRoute  # 🔥 這裡修正，不再重複加 `routeEnquiry`
        
        # 顯示車站資料
        if route_key in route_stops:
            st.subheader(f"🚏 車站列表 ({routeEnquiryRoute})")
            for stop in route_stops[route_key]:
                st.write(stop)
        else:
            st.error("⚠️ 無法找到該路線的車站資料，請檢查輸入是否正確。")

        # 顯示收費資訊
        if route_key in route_fare:
            st.subheader("💰 車費資訊")
            for fare in route_fare[route_key]:
                st.write(fare)
        else:
            st.error("⚠️ 找不到該路線的收費資訊，請檢查輸入。")

        # 顯示服務時間
        if route_key in route_service_time:
            st.subheader("⏰ 服務時間")
            st.write(f"{route_service_time[route_key]}")
        else:
            st.error("⚠️ 無法找到該路線的服務時間，請檢查輸入是否正確。")

    else:
        st.warning("請輸入正確的路線編號和總站代號。")